% vim:autoindent:set textwidth=78:

% \section{Working with Projections}\label{label_projections}
\section{Utiliser les projections}\label{label_projections}
% \index{Projections!working with}
\index{Projections!utiliser les}

% when the revision of a section has been finalized, 
% comment out the following line:
%\updatedisclaimer

% QGIS allows users to define a global and project-wide CRS (Coordinate
% Reference System) for layers without a pre-defined CRS. It also allows the
% user to define custom coordinate reference systems and supports on-the-fly
% (OTF) projection of vector layers. All these features allow the user to
% display layers with different CRS and have them overlay properly.
QGIS vous permet de définir une projection (CRS ou Système de coordonnées de
référence) globale et pour des couches qui n'ont pas de projection
prédéfinie au niveau du projet. Il permet également à l'utilisateur de définir
des systèmes de coordonnées de référence personnalisés et gère la reprojection
à la volée de couches vectorielles. Toutes ces fonctionnalités permettent à
l'utilisateur d'afficher des couches avec différentes projections et de les
superposer correctement.

% \subsection{Overview of Projection Support}\label{label_projoverview}
\subsection{Aperçu de la gestion des projections}\label{label_projoverview}

% QGIS has support for approximately 2,700 known CRS. Definitions for 
% each of these CRS are stored in a SQLite database that is installed with
% QGIS. Normally you do not need to manipulate the database directly. In fact,
% doing so may cause projection support to fail. Custom CRS are stored in a
% user database. See Section \ref{sec:customprojections} for
% information on managing your custom coordinate reference systems.
QGIS gère approximativement 2 700 projections connues. Les définitions pour
chacune d'entre elles sont stockées dans une base de données SQLite qui est
installée avec QGIS. Normalement vous n'avez pas besoin de manipuler cette base de
données directement. En fait, cela peut poser des problèmes de
gestion de projections. Les projections personnalisées y sont stockées dans une
base de données utilisateur. Voir la section \ref{sec:customprojections} pour
avoir des informations sur la gestion de vos systèmes de coordonnées de
référence personnalisées.

% The CRS available in QGIS are based on those defined by
% EPSG\index{EPSG} and are largely abstracted from the spatial\_references 
% table in PostGIS\index{PostGIS} version 1.x. The EPSG identifiers are
% present in the database and can be used to specify a CRS in QGIS.
Les projections disponibles dans QGIS sont basées sur celle définie par
EPSG\index{EPSG} et sont en grande partie extraite de la table
spatial\_references dans PostGIS\index{PostGIS} version 1.x. Les identifiants
EPSG sont présents dans la base de données et peuvent être utilisés pour définir
une projection dans QGIS.

% In order to use OTF projection, your data must contain information about its
% coordinate reference system or you have to define a global, layer or
% project-wide CRS. For PostGIS layers QGIS uses the spatial reference
% identifier that was specified when the layer was created. For data supported
% by OGR, QGIS relies on the presence of a format specific means of specifying
% the CRS. In the case of shapefiles, this means a file containing the Well
% Known Text (WKT)\index{WKT} specification of the CRS. The projection file
% has the same base name as the shapefile and a prj extension. For example, a
% shapefile named \filename{alaska.shp} would have a corresponding projection
% file named \filename{alaska.prj}.
Dans le but d'utiliser des projections à la volée, vos données doivent contenir
des informations sur leurs systèmes de coordonnées de référence ou vous devez
définir une projection pour votre projet, couche ou globale. Pour les couches
PostGIS, QGIS utilise l'identifiant de référence spatiale qui a été définie
quand la couche a été créée. Pour les données gérées par OGR, QGIS utilise un
moyen spécifique au format de définition de la projection. Dans le cas de
shapefile, cela signifie un fichier contenant une spécification Well Known Text
(WKT)\index{WKT} de la projection. Le fichier de projection a le même nom que
le fichier shape et une extension prj. Par exemple, un shapefile nommé
\filename{alaska.shp} aura un fichier de projection correspondant nommé
\filename{alaska.prj}.

% \subsection{Specifying a Projection}
\subsection{Définir une projection}
% \index{Projections!specifying}
\index{Projections!définition}
\label{sec:projection-specifying}

% QGIS no longer sets the map CRS to the coordinate reference system of the
% first layer loaded. When you start a QGIS session with layers that do not
% have a CRS, you need to control and define the CRS definition for these
% layers. This can be done globally or project-wide in the \tab{CRS} tab under
% \mainmenuopt{Settings} > \dropmenuopttwo{mActionOptions}{Options} (See
% Figure~\ref{fig:crsdialog}).
QGIS ne définit plus la projection de la carte au système de
coordonnées de référence de la première couche chargée. Lorsque vous démarrez
une session QGIS avec des couches qui ne possèdent pas de projection, vous devez
contrôler et définir la définition de la projection pour ces couches. Cela peut
être réalisée globalement ou par projet dans l'onglet \tab{projection} dans 
\mainmenuopt{Préférences} > \dropmenuopttwo{mActionOptions}{Options} (voir
 Figure~\ref{fig:crsdialog}).

\begin{itemize}
% \item \checkbox{Prompt for CRS}
\item \checkbox{Demande de projection}
% \item \checkbox{Project wide default CRS will be used}
\item \checkbox{La valeur par défaut au niveau du projet sera utilisée}
% \item \checkbox{Global default CRS displayed below will be used}
\item \checkbox{La valeur globale par défaut affiché ci-dessous sera
utilisée}
\end{itemize}

% The global default CRS \texttt{proj=longlat +ellps=WGS84 +datum=WGS84
% +no\_defs} comes predefined in QGIS but can of course be changed, and the new
% definition will be saved for subsequent QGIS sessions.    
La projection globale par défaut \texttt{proj=longlat +ellps=WGS84 +datum=WGS84
 +no\_defs} est prédéfinie dans QGIS mais peut bien sur être changée, et la
nouvelle définition sera sauvée pour les prochaines sessions de QGIS.

\begin{figure}[ht]
   \begin{center}
%    \caption{CRS tab in the QGIS Options Dialog
% \nixcaption}\label{fig:crsdialog}\smallskip
   \caption{Onglet Projection dans la boîte de dialogue de QGIS
\nixcaption}\label{fig:crsdialog}\smallskip
   \includegraphics[clip=true, width=12cm]{crsdialog}
\end{center}
\end{figure}

% If you want to define the coordinate reference system for a certain layer
% without CRS information, you can also do that in the \tab{General} tab of the
% raster properties (\ref{label_generaltab}) and vector properties
% (\ref{vectorgeneraltab}) dialog. If your layer already has a CRS defined, it
% will be displayed as shown in Figure~\ref{fig:vector_symbology}.
Si vous voulez définir le système de coordonnées de référence pour certaines
couches sans information sur la projection, vous pouvez également faire cela
dans l'onglet \tab{Général} de la boîte de dialogue propriété de la couche
raster (\ref{label_generaltab}) ou de celle de la couche vecteur
(\ref{vectorgeneraltab}). Si votre couche a déjà une projection définie, elle
sera affichée comme montré dans la figure~\ref{fig:vector_symbology}.

% \subsection{Define On The Fly (OTF) Projection}\label{label_projstart}
\subsection{Définir une projection à la volée (OTF)}\label{label_projstart}

% QGIS does not have OTF projection enabled by default, and this function is
% currently only supported for vector layers. To use OTF projection, you must
% open the \dropmenuopttwo{mActionOptions}{Project Properties} dialog, select a
% CRS and activate the \checkbox{Enable on the fly projection} checkbox.
% There are two ways to open the dialog:
QGIS n'active pas la projection à la volée par défaut, et cette fonction est
seulement gérée pour les couches vectorielles. Pour utiliser la projection à la
volée, vous devez ouvrir la boîte de dialogue
\dropmenuopttwo{mActionOptions}{Propriétés du projet}, sélectionner une
projection et cocher la case à cocher \checkbox{Activer la projection à la
volée}. Il y a deux manières pour ouvrir la boîte de dialogue :

\begin{enumerate}
% \item Select \dropmenuopttwo{mActionOptions}{Project Properties} from the
% \mainmenuopt{Settings} menu.
\item Sélectionnez \dropmenuopttwo{mActionOptions}{Propriétés du
projet} à partir du menu \mainmenuopt{Préférences}.
% \item Click on the \toolbtntwo{mIconProjectionDisabled}{projector} icon in the
% lower right-hand corner of the statusbar.
\item Cliquez sur l'icône \toolbtntwo{mIconProjectionDisabled}{projection} dans
le coin en base à droite de la barre de statut.
\end{enumerate}

% If you have already loaded a layer, and want to enable OTF projection, the
% best practice is to open the \tab{Coordinate Reference System} tab of the
% \dialog{Project Properties} dialog, select the CRS of the currently loaded
% layer, and activate the \checkbox{Enable on the fly projection} checkbox. The
% \toolbtntwo{mIconProjectionEnabled}{projector} icon will show a green hook
% and all subsequently loaded vector layers will be OTF projected to the
% defined CRS.
Si vous avez déjà chargée une couche, et désirez activer la projection à la
volée, la meilleure façon de faire est d'ouvrir l'onglet \tab{Système de
coordonnées de référence} de la boîte de dialogue \dialog{Propriétés du
projet}, sélectionner la projection de la couche chargée, et d'activer la case
\checkbox{Activer la projection à la volée}. L'icône
\toolbtntwo{mIconProjectionEnabled}{projection} affichera un symbole vert et
toutes les couches vecteurs chargées plus tard seront projetées à la volée dans
la projection définie.

% The \tab{Coordinate Reference System} tab of the \dialog{Project Properties}
% dialog contains four important components as numbered in Figure
% \ref{fig:projections} and described below.
L'onglet \tab{Système de Coordonnées de Référence} de la boîte de dialogue
\dialog{Propriétés du projet} contient quatre composants importants comme
numéroté à la figure \ref{fig:projections} et décrit ci-dessous.

\begin{figure}[ht]
   \begin{center}
%    \caption{Projection Dialog \nixcaption}\label{fig:projections}\smallskip
   \caption{Boîte de dialogue
Projection\nixcaption}\label{fig:projections}\smallskip
   \includegraphics[clip=true, width=12cm]{projectionDialog}
\end{center}
\end{figure}

\begin{enumerate}
% \item \textbf{Enable on the fly projection}\index{Projections!enabling} -
% this checkbox is used to enable or disable OTF projection. When off, each
% layer is drawn using the coordinates as read from the data source. When on,
% the coordinates in each layer are projected to the coordinate reference
% system defined for the map canvas.
\item \textbf{Activer la projection à la volée}\index{Projections!activer} -
cette case à cocher est utilisée pour activer ou désactiver la projection à la
volée. Lorsqu'elle ne l'est pas, chaque couche est dessinée en utilisant les
coordonnées lues dans la source de données. Lorsqu'elle est activée, les
coordonnées de chaque couche sont projetées dans le système de coordonnées de
référence définie pour la carte.
% \item \textbf{Coordinate Reference System} - this is a list of all CRS
% supported by QGIS, including Geographic, Projected and Custom coordinate
% reference systems. To use a CRS, select it from the list by expanding
% the appropriate node and selecting the CRS. The active CRS is preselected.
\item \textbf{Système de Coordonnées de Référence} - c'est une liste de toutes
les projections gérées par QGIS, incluant les systèmes de coordonnées
de référence géographiques, projetées et personnalisées. Pour utiliser une
projection, sélectionnez-la dans la liste en déroulant le noeud approprié et en
sélectionnant la projection. La projection active est présélectionnée.
% \item \textbf{Proj4 text} - this is the CRS string used by the Proj4
% projection engine. This text is read-only and provided for informational
% purposes.
\item \textbf{Texte Proj4} - c'est une chaîne de projection utilisé par le
moteur de projection Proj4. Ce texte est en lecture seul et est fournit pour
information.
% \item \textbf{Search} - if you know the EPSG identifier or the name 
% for a Coordinate Reference System, you can use the search feature to find it.
% Enter the identifier and click on \button{Find}.
\item \textbf{Rechercher} - si vous connaissez le code EPSG ou le nom d'un
système de coordonnées de référence, vous pouvez utiliser la fonction
rechercher pour le retrouver. Entrez le code et cliquez sur le bouton
\button{Trouver}.
\end{enumerate}

\begin{Astuce}
%  \caption{\textsc{Project Properties Dialog}}
 \caption{\textsc{boîte de dialogue Propriété du projet}}
\qgistip{
% If you open the \dialog{Project Properties} dialog from the
% \mainmenuopt{Settings} menu, you must click on the \tab{Coordinate Reference
% System} tab to view the CRS settings. Opening the dialog from the
% \toolbtntwo{mIconProjectionEnabled}{projector} icon will automatically bring
% the \tab{Coordinate Reference System} tab to the front.
Si vous ouvrez la boîte de dialogue \dialog{Propriétés du projet} à partir du
menu \mainmenuopt{Préférences}, vous devez cliquer sur l'onglet \tab{Système de
Coordonnées de Référence} pour voir les définitions de projection. Ouvrir la
boîte de dialogue à partir de l'icône
\toolbtntwo{mIconProjectionEnabled}{projection} vous amenera directement dans
l'onglet \tab{Système de Coordonnées de Référence}.
}
\end{Astuce}

% \subsection{Custom Coordinate Reference System}\label{sec:customprojections}
\subsection{Système de Coordonnées de Référence
personnalisées}\label{sec:customprojections}
\index{Projections!personnalisation}

% If QGIS does not provide the coordinate reference system you need, you
% can define a custom CRS. To define a CRS, select
% \dropmenuopttwo{mIconNew}{Custom CRS} from the \mainmenuopt{Settings} menu.
% Custom CRS are stored in your QGIS user database. In addition to your custom
% CRS, this database also contains your spatial bookmarks and other custom data.
Si QGIS ne fournit pas le système de coordonnées de référence dont vous avez
besoin, vous pouvez en définir un. Pour cela, sélectionnez
\dropmenuopttwo{mIconNew}{Projection personnalisée} à partir du menu
\mainmenuopt{Préférences}. Les projections personnalisées sont stockées dans la
base de données utilisateur de QGIS. En plus de votre projection personnalisée,
cette base de données contient également vos signets spatiaux et autres données
personnalisées.

\begin{figure}[ht]
   \begin{center}
%    \caption{Custom CRS Dialog
% \nixcaption}\label{fig:customprojections}\smallskip
\caption{Boîte de dialogue Projection
personnalitée\nixcaption}\label{fig:customprojections}\smallskip
   \includegraphics[clip=true, width=12cm]{customProjectionDialog}
\end{center}
\end{figure}

% Defining a custom CRS in QGIS requires a good understanding of the Proj.4
% projection library. To begin, refer to the Cartographic Projection Procedures
% for the UNIX Environment - A User's Manual by Gerald I. Evenden, U.S.
% Geological Survey Open-File Report 90-284, 1990 (available at 
% \url{ftp://ftp.remotesensing.org/proj/OF90-284.pdf}).
Définir une projection personnalisée dans QGIS nécessite une bonne
compréhension de la bibliothèque de projection Proj4. Pour commencer, référez
vous aux Procédures de Projection Cartographique pour l'environnement UNIX - Un
manuel d'utilisateur de Gerald I. Evenden, U.S. Geological Survey Open-File
Report 90-284, 1990 (disponible sur
\url{ftp://ftp.remotesensing.org/proj/OF90-284.pdf}).
% This manual describes the use of the \usertext{proj.4} and related command
% line utilities. The cartographic parameters used with \usertext{proj.4} are
% described in the user manual, and are the same as those used by QGIS.
Ce manuel décrit l'utilisation de \usertext{proj.4} et les applications en
lignes de commandes liées. Les paramètres cartographiques utilisés avec
\usertext{proj.4} sont décrit dans le manuel utilisateur et sont les mêmes que
ceux utilisés par QGIS.

% The \dialog{Custom Coordinate Reference System Definition} dialog requires
% only two parameters to define a user CRS:
La boîte de dialogue \dialog{Définition d'un système de coordonnées de
référence personnalisée} nécessite seulement deux paramètres pour définir une
projection personnalisée :
\begin{enumerate}
% \item a descriptive name and
\item un nom descriptif et
% \item the cartographic parameters in PROJ.4 format.
\item les paramètres cartographiques au format PROJ.4.
\end{enumerate}
% To create a new CRS, click the \toolbtntwo{mIconNew}{New} button and enter a
% descriptive name and the CRS parameters. After that you can save your CRS by
% clicking the button \toolbtntwo{mActionFileSave}{Save}.
Pour créer une nouvelle projection, cliquez sur le bouton
\toolbtntwo{mIconNew}{Nouveau} et entrez un nom descriptif et les paramètres de
la projection. Après cela vous pouvez sauver votre projection en cliquant le
bouton  \toolbtntwo{mActionFileSave}{Sauver}.

% Note that the \guilabel{Parameters} must begin with a \usertext{+proj=}-block,
% to represent the new coordinate reference system.
Remarquez que les \guilabel{Paramètres} doivent débuter par un
 bloc \usertext{+proj=} pour représenter le nouveau système de coordonnées de
référence.

% You can test your CRS parameters to see if they give sane results by
% clicking on the \button{Calculate} button inside the \guiheading{Test} block 
% and pasting your CRS parameters into
% the \guilabel{Parameters} field. Then enter known WGS 84 latitude and
% longitude values in \guilabel{North} and \guilabel{East} fields respectively.
% Click on \button{Calculate} and compare the results with the known values in
% your coordinate reference system.
Vous pouvez tester vos paramètres de projection pour voir s'il donne les mêmes
résultats en cliquant sur le bouton \button{Calculer} dans le bloc 
\guiheading{Test} et copiant vos paramètres de projection dans le champ
\guilabel{Paramètres}. Puis entrez une latitude et longitude connue en WGS 84
dans les champs \guilabel{Nord} et \guilabel{Est} respectivement. Cliquez sur
le bouton \button{Calculer} et comparez les résultats avec les valeurs connues
dans votre système de coordonnées de référence.

