%  !TeX  root  =  user_guide.tex

\section{Räumliche Abfrage Plugin}\label{sec:spatial_query}

% when the revision of a section has been finalized, 
% comment out the following line:
% \updatedisclaimer

Das \toolbtntwo{spatialquery}{Räumliche Abfrage} Plugin ermöglicht eine räumliche 
Abfrage (Objekte auswählen) in einem Quelllayer mit Verweis auf einen Referenzlayer. 
Die Funktionalität basiert auf der GEOS-Bibliothek und ist abhängig von dem 
ausgewählten Datentyp (Punkt, Linie, Polygon) des Layers mit den Quellobjekten.

Mögliche Operatoren sind:

\begin{itemize}[label=--]
\item Berührt
\item Enthält
\item Gleicht
\item Innerhalb
\item Ist ausserhalb
\item Überlappt
\item Überschneidet
\item Kreuzt
\end{itemize}

\minisec{Verwendung der Erweiterung}

Als Beispiel sollen die Regionen Alaskas gefunden werden, die Flugplätze enthalten. 
Folgende Schritte sind notwendig.

\begin{enumerate}
  \item Starten Sie QGIS und laden Sie die Vektorlayer regions.shp und airports.shp. 
  \item Laden Sie das Räumliche Abfrage Plugin im Plugin Manager (Siehe Kapitel 
  \ref{sec:load_core_plugin}) und klicken Sie auf das Icon 
  \toolbtntwo{spatialquery}{Räumliche Abfrage}, das in der Werkzeugleiste erscheint. 
  Der Dialog der Erweiterung öffnet sich, wie in Abbildung \ref{fig:spatialquerysample} 
  zu sehen.
  \item Wählen Sie den Layer regions als Layers mit den Quellobjekten und airports als 
  Layer mit den Referenzobjekten aus.
  \item Wählen Sie 'Enthält' als Operator und klicken Sie dann auf \button{Anwenden}.
\end{enumerate}

Sie bekommen dann eine Liste von Objekt IDs und haben verschiedene Optionen.

\begin{itemize}[label=--]
\item Klicken Sie auf \toolbtntwo{selectesubsetlayer}{Layer mit Liste von Elementen erzeugen}
\item Wählen Sie eine ID aus der Liste und klicken Sie auf 
\toolbtntwo{selectcreatelayer}{Layer mit gewählten erzeugen}
\item Wählen Sie \button{Aus aktueller Auswahl entfernen} im Bereich 'Das Ergebnis speichern in'.
\item Zusätzlich können Sie die Kontrollkästchen \checkbox{Zum Element zoomen} oder 
\checkbox{Protokoll} aktivieren.
\end{itemize}

\begin{figure}[ht]
   \centering
   \includegraphics[clip=true, width=12cm]{spatial_query_sample}
   \caption{Räumliche Abfrage - Regionen Alaskas mit Flugplätzen \nixcaption}
   \label{fig:spatialquerysample}
\end{figure}

\FloatBarrier

